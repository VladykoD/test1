const card=document.getElementById("cardDiv");let windowHeight=window.innerHeight,start=0,finish=0;function getPost(){let t=parseInt(get("imgcol"));fetch("https://jsonplaceholder.typicode.com/photos?_start=0&_limit=200").then(t=>t.json()).then(e=>{if(!(start>e.length)){finish+=t,finish>e.length&&(finish=e.length);for(let t=start;t<finish;t++)card.innerHTML+=`
        <li class='card list__item'>
          <img alt='${e[t].id}' class='card__image' src='${e[t].thumbnailUrl}' width='150' height='150'/>
          <p class='card__title'>${e[t].title}</p>
        </li>
      `;start+=t,checkGallerySize()}}).catch(t=>{card.innerHTML='<li class="list__item errorMessage">Подключиться не удалось. Пожалуйста попробуйте позже.</li>',console.log(t)})}function get(t){let e=window.location.search;return e=e.match(new RegExp(t+"=([^&=]+)")),e?e[1]:12}function checkGallerySize(){card.offsetHeight<=windowHeight&&getPost()}document.addEventListener("DOMContentLoaded",()=>{getPost()}),window.addEventListener("resize",function(){windowHeight=window.innerHeight}),window.addEventListener("scroll",function(){card.offsetHeight<=window.pageYOffset+windowHeight&&getPost()});